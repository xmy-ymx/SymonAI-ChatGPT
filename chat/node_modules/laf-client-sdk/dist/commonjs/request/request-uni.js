"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const request_1 = require("./request");
const types_1 = require("../types");
/**
 * Uni-app 环境请求类
 */
class UniRequest extends request_1.Request {
    constructor(config) {
        super(config);
    }
    /**
     * uni-app 环境请求方法
     * @override
     * @param data
     * @returns
     */
    async request(url, data, _options) {
        var _a;
        if (this.options.environment !== types_1.EnvironmentType.UNI_APP) {
            throw new Error('environment type must be uniapp');
        }
        const token = this.options.getAccessToken();
        const header = this.getHeaders(token);
        const options = {
            url,
            header,
            method: (_a = _options === null || _options === void 0 ? void 0 : _options.method) !== null && _a !== void 0 ? _a : 'POST',
            data,
            dataType: 'json'
        };
        const res = await uni.request(options);
        return res;
    }
}
exports.UniRequest = UniRequest;
//# sourceMappingURL=request-uni.js.map